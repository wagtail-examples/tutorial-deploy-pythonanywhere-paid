# Wagtail CMS site deployed to PythonAnywhere

This is a tutorial about one way to build and deploy a Wagtail CMS site to [PythonAnywhere](https://www.pythonanywhere.com).

It's a *starting point* that has most of the elements one might need (backend and frontend) to build a Wagtail site and deploy it live. It's by no means a complete site, in fact I've intentionally left out a lot of the things that make a site unique, such as the design, content, and custom code so that you can use this as a starting point for your own site.

I recommend you read:

The official [Wagtail documentation](https://wagtail.org) and [Developer Documentation](https://docs.wagtail.org/en/stable/), specifically [Your first wagtail site](https://docs.wagtail.org/en/stable/getting_started/tutorial.html)

I wanted to document the process I go through. I've actually built and deployed a fair few Wagtail sites over the last decade using various hosting platforms, as a freelancer. I now work for [Torchbox](https://torchbox.com) as a developer.

The code here is the complete source code after following the steps below.

- ✅ Python:3.10
- ✅ Mysql:5.7 (this is a limitation of my PythonAnywhere account)
- ✅ Node / webpack to build the frontend
- ✅ CI actions for code checks
- ✅ Pre-commit to run git hooks
- ✅ Wagtail CMS v5.1.1
- ✅ Django 4.1 (Mysql 5.7 requires Django < 4.2)

> Because I'm using git push to deploy the webapp and that requires SSH access, I am using a paid account on PythonAnywhere, which starts at €5/month.

## Overview of required steps

### Local setup

[Initial repo and starting a new Wagtail project](./docs/required/100-1-start-wagtail.md)

- Stating of with a new remote repo on Github (or similar) I clone it locally and start a new Wagtail project then install the python dependencies and start a new Wagtail site.
- I adjust the layout of the site generated by Wagtail to suit my preferences.

[Setup to use Mysql](./docs/required/100-2-use-mysql.md)

- Prepare to use a Mysql database in a docker container for local development. This is optional, but I prefer to use a local database that is the same as the one used when it's deployed live.
- Configure Wagtail to use the Mysql database via environment variables.
- Add further configuration settings to use environment variables.

> The site can be run locally at this point

### PythonAnywhere setup

[Set up a webapp and bare-repo on PythonAnywhere](./docs/required/200-1-webapp-setup.md)

- Create a new webapp, database, bare-repo, virtualenv, environment variables on PythonAnywhere.

[Add further deployment settings](./docs/required/200-2-deploy-hooks-wsgi.md)

- Update the post-receive hook to run the deployment and adjust the WSGI file on PythonAnywhere.

[Start a deployment](./docs/required/200-3-push-to-deploy.md)

- Push your first deployment.

The site can be viewed on PythonAnywhere at this point.

## Optional (recommended) steps

- [Add frontend/webpack to the project](./docs/optional/100-1-add-frontend-compilation.md)
- [Add code quality checks using pre-commit](./docs/optional/100-2-pre-commit.md)
- [Add GitHub Actions CI checks](./docs/optional/100-3-ci-actions.md)

There's more that could be done, here's a few extra guides.

- [A staging/client review site](./docs/more/a-stagingclient-review-site.md)
- [A backup strategy](./docs/more/b-a-backup-strategy.md)
- [How to setup sending emails](./docs/more/d-how-to-setup-sending-emails.md)
- [Database backup and restore](./docs/more/e-database-backup-and-restore.md)
- [Media files backup and restore](./docs/more/f-media-files-backup-and-restore.md)
